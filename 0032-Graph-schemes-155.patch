From 53709b2dbc569b4b63a6fbb2e559def5f57e670c Mon Sep 17 00:00:00 2001
From: bwetherfield <bwetherfield@gmail.com>
Date: Sat, 3 Nov 2018 14:57:48 -0400
Subject: [PATCH 32/66] Graph schemes (#155)

---
 .../Wetherfield/DirectedGraphProtocol.swift   | 19 ++++++++
 .../DirectedGraphSchemeProtocol.swift         | 10 +++++
 .../Wetherfield/GraphScheme.swift             | 19 ++++++++
 .../Wetherfield/GraphSchemeProtocol.swift     | 21 +++++++++
 .../UndirectedGraphSchemeProtocol.swift       | 10 +++++
 .../UnweightedGraphSchemeProtocol.swift       | 21 +++++++++
 .../WeightedDirectedGraphSchema.swift         | 19 ++++++++
 .../Wetherfield/WeightedGraphScheme.swift     | 19 ++++++++
 .../WeightedGraphSchemeProtocol.swift         | 45 +++++++++++++++++++
 9 files changed, 183 insertions(+)
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphProtocol.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphSchemeProtocol.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphScheme.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphSchemeProtocol.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/UndirectedGraphSchemeProtocol.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/UnweightedGraphSchemeProtocol.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedDirectedGraphSchema.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphScheme.swift
 create mode 100644 Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphSchemeProtocol.swift

diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphProtocol.swift
new file mode 100644
index 0000000..5ada6c7
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphProtocol.swift
@@ -0,0 +1,19 @@
+//
+//  DirectedGraphProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+struct DirectedGraphScheme <Node>: DirectedGraphSchemeProtocol, UnweightedGraphSchemeProtocol {
+    
+    typealias Edge = OrderedPair<Node>
+    
+    var contains: (Edge) -> Bool
+    
+    init (_ contains: @escaping (Edge) -> Bool) {
+        self.contains = contains
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphSchemeProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphSchemeProtocol.swift
new file mode 100644
index 0000000..a0814cf
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/DirectedGraphSchemeProtocol.swift
@@ -0,0 +1,10 @@
+//
+//  DirectedGraphSchemeProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+protocol DirectedGraphSchemeProtocol: GraphSchemeProtocol where Edge == OrderedPair<Node> { }
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphScheme.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphScheme.swift
new file mode 100644
index 0000000..88a1f8b
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphScheme.swift
@@ -0,0 +1,19 @@
+//
+//  GraphScheme.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+struct GraphScheme <Node>: UndirectedGraphSchemeProtocol, UnweightedGraphSchemeProtocol {
+    
+    typealias Edge = UnorderedPair<Node>
+    
+    var contains: (Edge) -> Bool
+    
+    init (_ contains: @escaping (Edge) -> Bool) {
+        self.contains = contains
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphSchemeProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphSchemeProtocol.swift
new file mode 100644
index 0000000..ad11593
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/GraphSchemeProtocol.swift
@@ -0,0 +1,21 @@
+//
+//  GraphSchemeProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+protocol GraphSchemeProtocol {
+    associatedtype Node
+    associatedtype Edge: SymmetricPair where Edge.A == Node
+}
+
+extension GraphProtocol {
+    func adjacencyScheme <G> (_ f: @escaping (G.Node) -> Node) -> AdjacencyCarrying<G> where
+        G: GraphProtocol
+    {
+        return AdjacencyCarrying.build(from: self).pullback(f)
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/UndirectedGraphSchemeProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/UndirectedGraphSchemeProtocol.swift
new file mode 100644
index 0000000..1184b5f
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/UndirectedGraphSchemeProtocol.swift
@@ -0,0 +1,10 @@
+//
+//  UndirectedGraphSchemeProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+protocol UndirectedGraphSchemeProtocol: GraphSchemeProtocol where Edge == UnorderedPair<Node> { }
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/UnweightedGraphSchemeProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/UnweightedGraphSchemeProtocol.swift
new file mode 100644
index 0000000..4cea885
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/UnweightedGraphSchemeProtocol.swift
@@ -0,0 +1,21 @@
+//
+//  UnweightedGraphSchemeProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+protocol UnweightedGraphSchemeProtocol: GraphSchemeProtocol {
+    var contains: (Edge) -> Bool { get }
+    
+    init (_ contains: @escaping (Edge) -> Bool)
+}
+
+extension UnweightedGraphSchemeProtocol {
+    @inlinable
+    func pullback <H> (_ f: @escaping (H.Node) -> Node) -> H where H: UnweightedGraphSchemeProtocol {
+        return H.init { self.contains(Edge(f($0.a),f($0.b))) }
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedDirectedGraphSchema.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedDirectedGraphSchema.swift
new file mode 100644
index 0000000..854f9c8
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedDirectedGraphSchema.swift
@@ -0,0 +1,19 @@
+//
+//  WeightedDirectedGraphSchema.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+struct WeightedDirectedGraphScheme <Node,Weight>: DirectedGraphSchemeProtocol, WeightedGraphSchemeProtocol {
+    
+    typealias Edge = OrderedPair<Node>
+    
+    var weight: (Edge) -> Weight?
+    
+    init (_ weight: @escaping (Edge) -> Weight?) {
+        self.weight = weight
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphScheme.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphScheme.swift
new file mode 100644
index 0000000..3f74b7e
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphScheme.swift
@@ -0,0 +1,19 @@
+//
+//  WeightedGraphScheme.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+struct WeightedGraphScheme <Node,Weight>: UndirectedGraphSchemeProtocol, WeightedGraphSchemeProtocol {
+    
+    typealias Edge = UnorderedPair<Node>
+    
+    var weight: (Edge) -> Weight?
+    
+    init (_ weight: @escaping (Edge) -> Weight?) {
+        self.weight = weight
+    }
+}
diff --git a/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphSchemeProtocol.swift b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphSchemeProtocol.swift
new file mode 100644
index 0000000..13a6a5e
--- /dev/null
+++ b/Sources/SpelledPitch/PitchSpeller/Wetherfield/WeightedGraphSchemeProtocol.swift
@@ -0,0 +1,45 @@
+//
+//  WeightedGraphSchemeProtocol.swift
+//  SpelledPitch
+//
+//  Created by Benjamin Wetherfield on 03/11/2018.
+//
+
+import DataStructures
+
+protocol WeightedGraphSchemeProtocol: GraphSchemeProtocol {
+    associatedtype Weight
+    
+    var weight: (Edge) -> Weight? { get }
+    
+    init (_ weight: @escaping (Edge) -> Weight?)
+}
+
+extension WeightedGraphSchemeProtocol {
+    @inlinable
+    func pullback <H> (_ f: @escaping (H.Node) -> Node) -> H where
+        H: WeightedGraphSchemeProtocol,
+        H.Weight == Weight
+    {
+        return H.init { self.weight(Edge(f($0.a),f($0.b))) }
+    }
+}
+
+extension WeightedGraphSchemeProtocol {
+    @inlinable
+    func unweighted <H> () -> H where
+        H: UnweightedGraphSchemeProtocol,
+        H.Edge == Edge
+    {
+        return H.init { self.weight($0) != nil }
+    }
+}
+
+extension WeightedGraphProtocol {
+    func weightScheme <G> (_ f: @escaping (G.Node) -> Node) -> WeightCarrying<G> where
+        G: WeightedGraphProtocol,
+        G.Weight == Weight
+    {
+        return WeightCarrying.build(from: self).pullback(f)
+    }
+}
-- 
2.17.2 (Apple Git-113)

